library(usethis)
devtools::load_all(".")
devtools::load_all(".")
calculate_if_positive <- function(a, b){
if(a < 0 & b < 0) {stop("Both numbers are negative.")}
else if(a < 0) {stop("Just the first number is negative")}
else if(b < 0) {stop("Just the second number is negative")}
list(add = a + b,
subtract = a - b,
plot = ggplot(data_frame(a, b), aes(a, b)) + geom_point())
}
# when the function works...
calculate_if_positive(4, 5)
# install.packages("devtools")
devtools::install_github("stenhaug/purrrplus")
library(tidyverse) # purrrplus adds functionality onto the tidyverse
library(purrrplus)
?library
(numbers <- data_frame(a = c(-1, 0, 1, 2),
b = c(2, 1, 0, -0),
irrelevant = c("minneapolis", "st_paul", "minneapolis", "st_paul")))
calculate_if_positive <- function(a, b){
if(a < 0 & b < 0) {stop("Both numbers are negative.")}
else if(a < 0) {stop("Just the first number is negative")}
else if(b < 0) {stop("Just the second number is negative")}
list(add = a + b,
subtract = a - b,
plot = ggplot(data_frame(a, b), aes(a, b)) + geom_point())
}
(numbers <- data_frame(a = c(-1, 0, 1, 2),
b = c(2, 1, 0, -0),
irrelevant = c("minneapolis", "st_paul", "minneapolis", "st_paul")))
numbers
calculate_if_positive
numbers %>% pmap(calculate_if_positive)
numbers %>% pmap(calculate_if_positive)
numbers %>% map2(calculate_if_positive)
?map2
numbers %>% map2(calculate_if_positive)
numbers
numbers %>% pmap(calculate_if_positive)
pmap(numbers, calculate_if_positive)
numbers2 <- select(numbers, -irrelvant)
numbers2 <- select(numbers, -irrelevant)
pmap(numbers2, calculate_if_positive)
numbers
(numbers <- data_frame(a = c(-1, 0, 1, 2),
b = c(2, 1, 0, -1),
irrelevant = c("minneapolis", "st_paul", "minneapolis", "st_paul")))
numbers2 <- select(numbers, -irrelevant)
pmap(numbers2, calculate_if_positive)
pmap(numbers2, safely(calculate_if_positive))
output <- pmap(numbers2, safely(calculate_if_positive))
str(output)
calculate_if_positive <- function(a, b){
if(a < 0 & b < 0) {stop("Both numbers are negative.")}
else if(a < 0) {stop("Just the first number is negative")}
else if(b < 0) {stop("Just the second number is negative")}
list(add = a + b,
subtract = a - b,
multiply = a * b,
divide = a / b)
}
(numbers <- data_frame(a = c(-1, 0, 1, 2),
b = c(2, 1, 0, -1),
irrelevant = c("minneapolis", "st_paul", "minneapolis", "st_paul")))
pmap(numbers, calculate_if_positive)
numbers2 <- select(numbers, -irrelevant)
pmap(numbers2, calculate_if_positive)
output <- pmap(numbers2, safely(calculate_if_positive))
str(output)
output
str(output)
output <- pmap(numbers, calculate_if_positive)
numbers
str(output)
numbers
mutate(numbers, output = numbers2)
mutate(numbers, output = output)
mutate(numbers, output = output)
numbers
pmap_safely(numbers, calculate_if_positive)
pmap_safely(numbers, calculate_if_positive)
output
output %>% get_errors()
output
(output <- pmap_safely(numbers, calculate_if_positive))
output %>% get_errors()
get_errors(output, specific = TRUE)
get_errors(output)
get_errors(output, specific = TRUE)
get_results(output)
# install.packages("devtools")
devtools::install_github("stenhaug/purrrplus")
